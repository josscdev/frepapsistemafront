<div *ngIf="isShow">
	<div class="" style="max-width: 650px;">
		<div class="container-fluid mt-4">
			<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
				<ol class="breadcrumb">
					<li class="breadcrumb-item fw-bold">
						<a class="text-decoration-none">
							Validación de Entrega de Bundles
						</a>
					</li>
					<li class="breadcrumb-item fw-bold active" aria-current="page">Validar</li>
				</ol>
			</nav>
		</div>
		<div class="card border-dark">

			<div class="container p-3">
				<div class="row">
					<div class="col text-start">
						<img src="assets/img/entel.webp" class="img-fluid" style="max-height: 30px; " alt="...">
					</div>
					<div class="col text-end">
						<img src="assets/img/Rom/ROM_transparente.webp" class="img-fluid" style="max-height: 30px; "
							alt="...">
					</div>
				</div>
			</div>

			<div class="col text-center align-middle" style="-webkit-text-stroke-width: thin;
                    align-self: center; font-size: x-large;">
				<span class="">Validación de Entrega de Bundles</span>
			</div>
			<div class="px-4 py-3">
				Estimado Cliente,<br>
				Agradecemos su preferencia con el siguiente premio:
				<br>
				<div >
					<span [ngClass]="{'blur-text': !isValidated}">
						{{this.validacionBundle.nombrebundle}}
					</span>
				</div>

				<br>
				<br>
				<p class="text-end"><i>Muchas Gracias por su compra.</i></p>
				<hr>
				<br>
				Por favor, rellenar los datos con (*):<br>
			</div>

			<form [formGroup]="bundleForm" (ngSubmit)="getBundleForm()">
				<div class="card-body">
					<div class="row my-3 px-2">
						<div class="col-sm-12">
							<label for="input1" class="form-label">Código de Autenticación (*)</label>
							<input type="text" id="input1" class="form-control" 
								placeholder="Escriba código de autenticación" style="background-color: white;" 
								formControlName="codigoAutenticacion"
								[readOnly]="isKeyIn" maxlength="10" (input)="removeSpaces()">
							<button type="button" class="btn btn-success mt-2" (click)="postCodigoAutenticacion()">
								Validar <i class="bi bi-search" style="font-size: 1.4rem;"></i>
							</button>
						</div>
					</div>
					<!-- <div class="row my-3 px-2">
					<div class="col-sm-12">
						<label for="input1" class="form-label">Código de Venta</label>
						<input type="text" id="input1" class="form-control" formControlName="intidventasprincipal"
							[maxlength]="13">
						<button type="button" class="btn btn-success mt-2" (click)="getBundlesVentas()">
							<i class="bi bi-search" style="font-size: 1.4rem;"></i>
						</button>
					</div>
				</div> -->
					<div *ngIf="isValidated">
						<div class="row my-3 px-2">
							<div class="col-sm-12">
								<label for="input2" class="form-label">Nombre Vendedor</label>
								<input type="text" id="input2" class="form-control" formControlName="nombrepromotor"
									readonly>
							</div>
						</div>
						<div class="row my-3 px-2">
							<div class="col-sm-12">
								<label for="input3" class="form-label">DNI Cliente</label>
								<input type="text" id="input3" class="form-control" formControlName="doccliente"
									readonly>
							</div>
						</div>
						<div class="row my-3 px-2">
							<div class="col-sm-12">
								<label for="input4" class="form-label">Producto</label>
								<input type="text" id="input4" class="form-control" formControlName="nombresubproducto" readonly>
							</div>
						</div>
						<div class="row my-3 px-2">
							<div class="col-sm-12">
								<label for="input5" class="form-label">Premio</label>
								<input type="text" id="input5" class="form-control" formControlName="nombrebundle"
									readonly>
							</div>
						</div>
						<div *ngIf="esObsequio">
							<div class="row my-3 px-2">
								<div class="col-sm-12">
									<label for="input6" class="form-label">Nombre Obsequio (*)</label>
									<input type="text" id="input6" class="form-control" 
									placeholder="Escriba nombre de obsequio" style="background-color: white" 
									(input)="transformToUpperCase($event)" maxlength="100"
									formControlName="nombreobsequio">
								</div>
							</div>
						</div>
						<div class="row my-3 px-2">
							<div class="col-sm-12">
								<button *ngIf="!firmaBase64" class="btn btn-info mt-4" data-bs-toggle="modal"
									data-bs-target="#staticBackdrop" type="button">
									Firmar <i class="bi bi-pencil-square" style="font-size: 1.4rem;"></i>
								</button>
								<div *ngIf="firmaBase64" class="mt-3">
									<h6 class="mb-1">Firma (Vista Preliminar):</h6>
									<img [src]="firmaBase64" alt="Firma" class="img-fluid" style="border: solid 2px;">
									<br>
									<button type="button" class="btn btn-info mt-1" (click)="limpiarFirma()"
										data-bs-dismiss="modal">
										Borrar Firma <i class="bi bi-trash-fill" style="font-size: 1.4rem;"></i>
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div *ngIf="isValidated" class="card-footer text-body-secondary text-end">
					<button type="submit" class="btn btn-primary m-3">
						Enviar Confirmación
					</button>
				</div>
			</form>
		</div>
	</div>

	<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="staticBackdropLabel" aria-hidden="true" (shown.bs.modal)="verdimensiones()">
		<div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5 fw-bold" id="staticBackdropLabel">Firme Aquí</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
					<signature-pad style="width: 100%; height: 150px;" #signature fxFlex="1 1 50%"
						(window:resize)="resizeSignaturePad()" class="signature" id="sign_canvas"
						fxFlexAlign.xs="center">
					</signature-pad>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-success" (click)="guardarFirma()" data-bs-dismiss="modal">
						Guardar <i class="bi bi-floppy2-fill" style="font-size: 1.4rem;"></i>
					</button>
					<button type="button" class="btn btn-info mt-1" (click)="limpiarFirma()">
						Borrar <i class="bi bi-trash-fill" style="font-size: 1.4rem;"></i>
					</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div *ngIf="!isShow">
	<div class="card border-dark mt-5 pt-4 px-3">
		<div class="col text-center align-middle" style="-webkit-text-stroke-width: thin;
                    align-self: center; font-size: x-large;">
			<span class=""><b>La Entrega del Premio para esta Venta ya ha sido Confirmada</b></span>
		</div>
		<div class="text-center">
			<i class="bi bi-shield-check text-success" style="font-size: 3rem;"></i>
		</div>
	</div>
</div>